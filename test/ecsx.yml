region: 'us-east-1'
accountId: 1234
project: 'ecsx'

clusters:
  ecsx-test-cluster:
    environment: test
    envVars:
      CLUSTER_ENV: test
      APP_ENV: test
    targetGroups:
      - arn: arn:xxx
        port: 3000
        task: mocha
    securityGroups:
      - "sg-1"
    subnets:
      - "subnet-1"
    secrets:
      app: arn:aws:secretsmanager:{{ region }}:{{ accountId }}:secret:{{ project }}/app/test-xxx

tasks:
  mocha: &mocha
    taskRoleArn: 'somerole'
    executionRoleArn: 'somerole'
    image: ''
    command: []
    cpu: 256
    memory: 512
    envVars:
      APP_ENV: task-test
      CLUSTER_NAME: "{{ clusterName }}"
    environment:
      DEPRECATED_APP_ENV: invalid
    subnets:
      - subnet-2
    secrets:
      - name: 'app'
        keys:
          - NODE_ENV
          - SOME_VAR
  console:
    <<: *mocha
    command: [ /bin/sh ]

